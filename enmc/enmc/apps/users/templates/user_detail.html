{% extends 'users_base.html' %}
{% load staticfiles %}

{% block custom_css %}
    <link rel="stylesheet" type="text/css" href="/static/css/login.css">
{% endblock %}

{% block content %}
    <section>
        <div class="form-box" style="margin-top: 12%; margin-bottom: 12%">
            {% if user_name %}
                <h2>修改用户</h2>
                <form action="{% url '[users]:user_detail' %}?user={{ user_name }}&email={{ email }}&mobile={{ mobile }}"
                      method="post" autocomplete="off">
            {% else %}
                <h2>添加用户</h2>
                <form action="{% url '[users]:user_detail' %}" method="post" autocomplete="off">
            {% endif %}
            {% csrf_token %}
            <div class="form-group marb20 {% if user_detail_form.errors.username %}
                       errorput
                    {% endif %}">
                <label>用&nbsp;户&nbsp;名</label>
                <input name="username" id="account_l" type="text"
                        {% if user_name %}
                       value="{{ user_name }}"
                        {% else %}
                       placeholder="请输入用户名"
                        {% endif %}/>
            </div>
            <div class="error btns login-form-tips" id="jsLoginTips">
                {{ user_detail_form.errors.username }}
            </div>
            <div class="form-group marb20 {% if user_detail_form.errors.password %}
                       errorput
                    {% endif %}">
                <label>密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码</label>
                <input name="password" id="password_l" type="password" placeholder="请输入您的密码"/>
            </div>
            <div class="error btns login-form-tips" id="jsLoginTips">
                {{ user_detail_form.errors.password }}
            </div>
            <div class="form-group marb20 {% if user_detail_form.errors.password2 %}
                       errorput
                    {% endif %}">
                <label>再&nbsp;输&nbsp;入</label>
                <input name="password2" id="password_l" type="password" placeholder="请再输入您的密码"/>
            </div>
            <div class="error btns login-form-tips" id="jsLoginTips">
                {{ user_detail_form.errors.password2 }}
            </div>
            <div class="form-group marb20 {% if user_detail_form.errors.email %}
                       errorput
                    {% endif %}">
                <label>邮&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;箱</label>
                <input name="email" id="account_l" type="text"
                        {% if email %}
                       value="{{ email }}"
                        {% else %}
                       placeholder="请再输入您的邮箱"
                        {% endif %}/>
            </div>
            <div class="error btns login-form-tips" id="jsLoginTips">
                {{ user_detail_form.errors.email }}
            </div>
            <div class="form-group marb20 {% if user_detail_form.errors.mobile %}
                       errorput
                    {% endif %}">
                <label>手&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;机</label>
                <input name="mobile" id="account_l" type="text"
                        {% if mobile %}
                       value="{{ mobile }}"
                        {% else %}
                       placeholder="请再输入您的手机号"
                        {% endif %}/>
            </div>
            <div class="error btns login-form-tips" id="jsLoginTips">
                {{ user_detail_form.errors.mobile }}
            </div>
            <div class="form-group marb20 {% if user_detail_form.errors.role %}
                       errorput
                    {% endif %}">
                <label>用户类型</label>
                <select name="role" id="account_l" style="width: 215px; height: 38px">
                    {% if role %}
                        <option value="{{ role }}">
                            {% if role == 'yunwei' %}运&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;维</option>{% endif %}
                            {% if role == 'yanfa' %}研&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;发</option>{% endif %}
                            {% if role == 'yunying' %}运&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;营</option>{% endif %}
                    {% else %}
                        <option value="yunwei">运&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;维</option>
                        <option value="yanfa">研&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;发</option>
                        <option value="yunying">运&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;营</option>
                    {% endif %}
                </select>
            </div>
            <div class="error btns login-form-tips" id="jsLoginTips">
                {{ user_detail_form.errors.role }}
            </div>
            <div class="error btns login-form-tips" id="jsLoginTips">
                {{ msg }}
            </div>
            <div class="auto-box marb38">
            </div>
            {% if user_name %}
                <input class="btn btn-green" id="jsLoginBtn" type="submit"
                       value="修&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;改"/>
            {% else %}
                <input class="btn btn-green" id="jsLoginBtn" type="submit"
                       value="添&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;加"/>
            {% endif %}
            </form>
        </div>
    </section>
    <script src="/static/js/jquery.min.js" type="text/javascript"></script>
    <script src="/static/js/unslider.js" type="text/javascript"></script>
    <script src="/static/js/login.js" type="text/javascript"></script>
{% endblock %}